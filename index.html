<!DOCTYPE html>
<html>
    <head>
        <title>Home &mdash; PHP Extension Book &mdash; Extension Cookbook!</title>
        <meta charset="utf-8">
        <meta name="theme-color" content="#ffffff">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
                    <meta name="robots" content="noindex, follow">
        

        
        <link href="https://c9s.github.io/extbook/stylesheets/style.css" rel="stylesheet" type="text/css" />
        <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
        <!--[if lt IE 9]>
            <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">

        <link rel="stylesheet" href="https://c9s.github.io/extbook/components/highlightjs/styles/github.css" />
        <link rel="alternate" type="application/atom+xml" href="https://c9s.github.io/extbook/atom.xml" title="PHP Extension Book activity feed" />
        <style>
        /** quick fix because bootstrap <pre> has a background-color. */
        pre code { background-color: inherit; }

        </style>
                                    </head>
    <body>

        <div class="container">

            <div class="row">

                <div class="col-md-9">

                                            <article>
        <header>
            <h2><a href="https://c9s.github.io/extbook/blog/2015/09/14/extension-skeleton">Extension Skeleton</a></h2>
        </header>
        <div>
            <p>To create an extension, you will need at least three files:</p>

<ul>
<li><code>config.m4</code></li>
<li><code>ext_foo.c</code></li>
<li><code>ext_foo.h</code></li>
</ul>

<p>Here is a initial content of <code>config.m4</code>:</p>

<pre><code class="m4">PHP_ARG_ENABLE(foo, whether to enable foo extension support,
  [--enable-foo Enable foo extension support])
PHP_NEW_EXTENSION(foo, php_foo.c, $ext_shared)
</code></pre>

<p>here is the content of <code>php_foo.h</code>:</p>

<pre><code class="c">#ifndef _PHP_FOO_H
#define _PHP_FOO_H
#ifdef HAVE_CONFIG_H
    #include "config.h"
#endif

#ifdef ZTS
    #warning php_ext_uv module will *NEVER* be thread-safe
    #include &lt;TSRM.h&gt;
#endif

#include &lt;php.h&gt;

extern zend_module_entry foo_module_entry;

PHP_FUNCTION(foo_hello);

#endif
</code></pre>

<p>Here is the content of <code>php_foo.c</code>, a minimal extension source code must contains a <code>zend_module_entry</code>,
And you usually need to define <code>zend_function_entry</code> to declare your extension functions:</p>

<pre><code class="c">#include "php_foo.h"

PHP_MINIT_FUNCTION(foo);
PHP_MSHUTDOWN_FUNCTION(foo);
PHP_MINFO_FUNCTION(foo);

#if COMPILE_DL_FOO
ZEND_GET_MODULE(foo)
#endif

static const zend_function_entry foo_functions[] = {
    PHP_FE(foo_hello, NULL)
    PHP_FE_END
};

zend_module_entry foo_module_entry = {
#if ZEND_MODULE_API_NO &gt;= 20010901
    STANDARD_MODULE_HEADER,
#endif
    "Foo",
    foo_functions, // where you define your functions
    PHP_MINIT(foo),
    PHP_MSHUTDOWN(foo),
    NULL, // PHP_RINIT(foo)
    NULL, // PHP_RSHUTDOWN(foo)
    PHP_MINFO(foo),
#if ZEND_MODULE_API_NO &gt;= 20010901
    "0.1",
#endif
    STANDARD_MODULE_PROPERTIES
};

PHP_MINIT_FUNCTION(foo) {
    return SUCCESS;
}

PHP_MSHUTDOWN_FUNCTION(foo) {
    return SUCCESS;
}

PHP_MINFO_FUNCTION(foo) {
}

PHP_FUNCTION(foo_hello) {
    RETURN_TRUE;
}

</code></pre>

<p>Compile it!</p>

<pre><code class="sh">phpize
./configure
make
</code></pre>

        </div>
            </article>
    <article>
        <header>
            <h2><a href="https://c9s.github.io/extbook/blog/2012/11/27/lorem-ipsum">Lorem Ipsum</a></h2>
        </header>
        <div>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin consequat congue
lacus vel convallis. Cras nisi urna, ultrices non semper quis, ultricies sit
amet est. Donec nunc velit, consequat a pulvinar a, eleifend id leo. Curabitur
vel leo eros, vitae elementum purus. Integer id lorem hendrerit purus gravida
commodo. Pellentesque nec rhoncus turpis. Cras feugiat odio eget quam semper at
dictum lectus adipiscing. In ut est et mauris pulvinar placerat eget fringilla
lectus.</p>

<p>Ut in mauris augue, vitae facilisis purus. Nam ullamcorper pharetra lorem,
cursus lobortis tellus facilisis congue. Etiam ac dapibus lectus. Nunc tempus
ullamcorper felis, eu sagittis risus mollis aliquam. Mauris congue orci ac metus
egestas porta nec ac lectus. Nam ac neque vitae quam sagittis dapibus. Morbi sit
amet erat ac justo rutrum molestie id in tortor. Proin egestas tortor neque,
eget fringilla nunc. Donec consequat purus ac risus dignissim dignissim.
Praesent dui nisl, suscipit sed cursus in, dictum non elit. Nulla eget congue
nisl.</p>

<p>Morbi hendrerit porta ante, dapibus adipiscing nibh ornare at. Nullam iaculis
porta ante, at semper tellus auctor nec. Vestibulum nec justo sed purus
elementum venenatis. In hac habitasse platea dictumst. Fusce nibh tellus, varius
non commodo sit amet, eleifend placerat nisl. Donec sit amet enim cursus ligula
adipiscing auctor. Nullam sagittis porta ligula vitae rutrum. Aenean id sapien
mi, elementum ullamcorper lectus. Aliquam erat volutpat. Fusce bibendum, leo
ultricies lacinia viverra, mauris urna fermentum sem, id tempus lectus nunc
faucibus magna. Vestibulum risus mi, tempus ut lobortis non, mattis sed diam.
Nunc at mattis leo.</p>

<p>Ut erat nunc, vestibulum sit amet sodales non, tincidunt nec justo. Integer
vitae tortor massa. Vestibulum tincidunt commodo lacus, ac cursus lorem mattis
eu. Donec ut magna vel urna fermentum congue. Donec laoreet neque at velit
imperdiet luctus. In consectetur lacus eu purus dictum a imperdiet leo
ullamcorper. Phasellus consequat feugiat tincidunt. Quisque vel orci in mauris
fermentum pretium.</p>

<p>Pellentesque rhoncus accumsan auctor. Nunc venenatis tellus non ante pharetra
pretium. Sed rutrum, eros eu tristique luctus, neque sapien ultrices felis, id
varius orci erat eget leo. Curabitur ut volutpat diam. Phasellus porta neque
vitae nisi sodales ultrices. Etiam ultricies blandit lorem, id accumsan eros
facilisis vel. Praesent nulla sapien, laoreet sit amet dapibus sit amet,
tincidunt vitae neque. Vestibulum aliquam sollicitudin urna, in facilisis dui
aliquam id.</p>

        </div>
            </article>
    <article>
        <header>
            <h2><a href="https://c9s.github.io/extbook/blog/2012/11/26/and-then-there-was-textile-support">And Then There Was Textile Support</a></h2>
        </header>
        <div>
            <p><a href="https://github.com/netcarver/textile">Textile</a> support was added on November 26th, 2012. Markdown is great, but so is choice. More converters for all!</p>

<p>In honor of this milestone, this post is written in <strong>Textile</strong>.</p>
        </div>
                    <p class="tags">
            Tags:
                        <a href="https://c9s.github.io/extbook/blog/tags/sculpin">sculpin</a>,                         <a href="https://c9s.github.io/extbook/blog/tags/textile">textile</a>                        </p>
            </article>
    <nav>
        <br />
        <a href="https://c9s.github.io/extbook/page/2">Older Posts</a><br />
    </nav>
                    
                </div>

                <div class="col-md-3 sidebar">

                    <h3>
                        <a href="https://c9s.github.io/extbook/">PHP Extension Book</a>
                    </h3>

                    <ul class="list-unstyled">
                        <li><a href="https://c9s.github.io/extbook/blog/categories">Categories</a></li>
                        <li><a href="https://c9s.github.io/extbook/blog/tags">Tags</a></li>
                        <li><a href="https://c9s.github.io/extbook/blog">Posts Archive</a></li>
                        <li><a href="https://c9s.github.io/extbook/about">About</a></li>
                    </ul>


                    <h4>Recent Posts</h4>

                    <ul class="list-unstyled">
                                                    <li><a href="/blog/2015/09/14/extension-skeleton">Extension Skeleton</a></li>
                                                    <li><a href="/blog/2012/11/27/lorem-ipsum">Lorem Ipsum</a></li>
                                                    <li><a href="/blog/2012/11/26/and-then-there-was-textile-support">And Then There Was Textile Support</a></li>
                                                    <li><a href="/blog/2012/10/16/balrog">Balrog</a></li>
                                                    <li><a href="/blog/2012/09/29/symfony-live-hacking-day">Symfony Live Hacking Day!</a></li>
                                                    <li><a href="/blog/2011/12/20/happy-birthday-sculpin">Happy Birthday Sculpin!</a></li>
                                            </ul>
                </div>

            </div>

            <div class="well">
                <h3>PHP Extension Book <small>Extension Cookbook!</small></h3>
            </div>

            <div class="well">
                                <h4>Powered By</h4>
                <ul class="list-unstyled">
                    <li><a href="http://sculpin.io">sculpin.io</a></li>
                    <li><a href="http://twitter.com/getsculpin">@getsculpin</a></li>
                </ul>
            </div>

            <footer>
                &copy; 2015 PHP Extension Book
            </footer>
        </div>


        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="https://c9s.github.io/extbook/components/jquery/jquery.min.js"><\/script>')</script>
                
                <script src="https://c9s.github.io/extbook/components/highlightjs/highlight.pack.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>

                    </body>
</html>
